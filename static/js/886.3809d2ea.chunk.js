"use strict";(self.webpackChunkportfolio_react=self.webpackChunkportfolio_react||[]).push([[886],{1886:function(e,t,a){a.r(t),a.d(t,{default:function(){return k}});var s=a(5671),o=a(3144),n=a(7326),r=a(9340),i=a(8557),d=a(2791),l=a(2142),c=a(184);var u=function(e){var t=e.position,a=t.left,s=t.top;return(0,c.jsxs)("div",{className:l.Z.food,style:{left:a+"px",top:s+"px"},children:[(0,c.jsx)("div",{}),(0,c.jsx)("div",{}),(0,c.jsx)("div",{}),(0,c.jsx)("div",{})]})};function f(e){var t=e.data,a=void 0===t?[]:t;return(0,c.jsx)("div",{className:l.Z.snake,children:a.map((function(e,t){var a=e.left,s=e.top;return(0,c.jsx)("div",{className:l.Z.snake_item,style:{left:a+"px",top:s+"px"}},t)}))})}function v(e){return 0===e.status?(0,c.jsx)("div",{className:l.Z.game_status,children:"\u6309\u7a7a\u683c\u952e\u5f00\u59cb\u6e38\u620f"}):2===e.status?(0,c.jsx)("div",{className:l.Z.game_status,children:"\u6e38\u620f\u6682\u505c"}):3===e.status?(0,c.jsx)("div",{className:l.Z.game_status,children:"\u6e38\u620f\u7ed3\u675f"}):null}var p=a(763),m=a.n(p),k=function(e){(0,r.Z)(a,e);var t=(0,i.Z)(a);function a(){var e;return(0,s.Z)(this,a),(e=t.call(this)).direction="ArrowRight",e.directionKeyCode=["ArrowUp","ArrowLeft","ArrowRight","ArrowDown","KeyA","KeyS","KeyD","KeyW"],e.speed=300,e.maxLevel=10,e.levelThreshold=2,e.timer=null,e.keydownHandler=function(t){t.preventDefault();var a=t.code,s=e.state.gameStatus;e.directionKeyCode.includes(a)&&1===s?e.direction=a:"Space"===a&&3!==s?(s=1===s?2:1,e.setState({gameStatus:s},(function(){1===e.state.gameStatus?e.move():clearTimeout(e.timer)}))):"KeyR"===a&&(e.setState({snakeData:[{left:0,top:0}],level:1,score:0,gameStatus:0}),e.speed=300)},e.move=function(){switch(e.direction){case"ArrowUp":case"KeyW":e.updateSnakeData("top",-10);break;case"ArrowDown":case"KeyS":e.updateSnakeData("top",10);break;case"ArrowLeft":case"KeyA":e.updateSnakeData("left",-10);break;case"ArrowRight":case"KeyD":e.updateSnakeData("left",10)}},e.updateSnakeData=function(t,a){var s=m().cloneDeep(e.state.snakeData),o=s.length;if(o>1){for(var r=o-1;r>0;r--){var i=s[r-1].top,d=s[r-1].left;s[r].left=d,s[r].top=i}s[0][t]+=a}else s[0][t]+=a;if(s[0].left<0||s[0].top<0||s[0].left>290||s[0].top>290)return e.setState({gameStatus:3}),void clearTimeout(e.timer);for(var l=1,c=s.length;l<c;l++){var u=s[l];if(s[0].top===u.top&&s[0].left===u.left)return e.setState({gameStatus:3}),void clearTimeout(e.timer)}e.setState({snakeData:s},(function(){e.checkFood(),e.timer=setTimeout(e.move.bind((0,n.Z)(e)),e.speed)}))},e.addSnakeData=function(){var t=m().cloneDeep(e.state.snakeData),a=t[t.length-1],s={top:a.top,left:a.left};switch(e.direction){case"ArrowUp":case"KeyW":s.top-=10;break;case"ArrowDown":case"KeyS":s.top+=10;break;case"ArrowLeft":case"KeyA":s.left+=10;break;case"ArrowRight":case"KeyD":s.left-=10}t.push(s),e.setState({snakeData:t})},e.addScore=function(){var t=e.state,a=t.score,s=t.level;a+=1;var o=s;s<e.maxLevel&&(o=Math.floor(a/e.levelThreshold)+1),e.speed=300-30*(s-1),e.setState({score:a,level:o})},e.refreshFood=function(){var t=10*Math.round(29*Math.random()),a=10*Math.round(29*Math.random());e.setState({foodPosition:{left:t,top:a}})},e.state={snakeData:[{left:0,top:0}],level:1,score:0,gameStatus:0,foodPosition:{left:"0px",top:"0px"}},e}return(0,o.Z)(a,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keydownHandler),this.refreshFood()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keydownHandler)}},{key:"checkFood",value:function(){var e=this.state,t=e.foodPosition,a=e.snakeData[0];a.top===t.top&&a.left===t.left&&(this.addScore(),this.refreshFood(),this.addSnakeData())}},{key:"render",value:function(){var e=this.state,t=e.snakeData,a=void 0===t?[]:t,s=e.score,o=e.level,n=e.foodPosition,r=e.gameStatus;return(0,c.jsxs)("div",{className:l.Z.main,children:[(0,c.jsxs)("div",{className:l.Z.stage,children:[(0,c.jsx)(v,{status:r}),(0,c.jsx)(f,{data:a}),(0,c.jsx)(u,{position:n})]}),(0,c.jsxs)("div",{className:l.Z.scorePanel,children:[(0,c.jsxs)("div",{children:["Score:",s]}),(0,c.jsxs)("div",{children:["Level:",o]})]})]})}}]),a}(d.Component)},2142:function(e,t){t.Z={main:"GreedySnake_main__v43kz",stage:"GreedySnake_stage__k17Mh",game_status:"GreedySnake_game_status__YqRuT",snake_item:"GreedySnake_snake_item__ESUeZ",food:"GreedySnake_food__4Ku2T",scorePanel:"GreedySnake_scorePanel__R+mB-",introduce_container:"GreedySnake_introduce_container__NtQgc",title:"GreedySnake_title__6eaNV",usage:"GreedySnake_usage__ag5fw",label:"GreedySnake_label__93NsN"}}}]);
//# sourceMappingURL=886.3809d2ea.chunk.js.map